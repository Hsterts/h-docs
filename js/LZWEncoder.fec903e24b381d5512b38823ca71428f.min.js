LZWEncoder=function(){var d={},M,w,y,u,v,j,t,c,f,o,m,n,C=-1,O=12,N=5003,k=O,_=1<<O,i=[],p=[],g=N,r=0,a=!1,s=0,e=0,D=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],E=[],z=d.LZWEncoder=function(e,t,n,s){M=e,w=t,y=n,u=Math.max(2,s)},A=function(e,t){E[n++]=e,n>=254&&S(t)},T=function(e){b(g),r=o+2,a=!0,l(o,e)},b=function(t){for(var e=0;e<t;++e)i[e]=-1},F=d.compress=function(O,u){f=O,a=!1,t=f,c=h(t),o=1<<O-1,m=o+1,r=o+2,n=0,s=x(),v=0;for(d=g;d<65536;d*=2)++v;v=8-v,y=g,b(y),l(o,u);outer_loop:for(var d,e,j,s,w,y,v;(j=x())!=C;){if(d=(j<<k)+s,e=j<<v^s,i[e]==d){s=p[e];continue}if(i[e]>=0){w=y-e,e===0&&(w=1);do if((e-=w)<0&&(e+=y),i[e]==d){s=p[e];continue outer_loop}while(i[e]>=0)}l(s,u),s=j,r<_?(p[e]=r++,i[e]=d):T(u)}l(s,u),l(m,u)},L=d.encode=function(e){e.writeByte(u),v=M*w,j=0,F(u+1,e),e.writeByte(0)},S=function(e){n>0&&(e.writeByte(n),e.writeBytes(E,0,n),n=0)},h=function(e){return(1<<e)-1},x=function(){if(v===0)return C;--v;var e=y[j++];return e&255},l=function(n,o){for(s&=D[e],e>0?s|=n<<e:s=n,e+=t;e>=8;)A(s&255,o),s>>=8,e-=8;if((r>c||a)&&(a?(c=h(t=f),a=!1):(++t,t==k?c=_:c=h(t))),n==m){for(;e>0;)A(s&255,o),s>>=8,e-=8;S(o)}};return z.apply(this,arguments),d}