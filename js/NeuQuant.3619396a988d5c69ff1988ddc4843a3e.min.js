NeuQuant=function(){var r={},x,_,n,c,e,t=256,O=499,y=491,j=487,k=503,b=3*k,v=t-1,s=4,B=100,g=16,u=1<<g,h=10,K=1<<h,f=10,D=u>>f,z=u<<h-f,T=t>>3,p=6,F=1<<p,M=T*F,S=30,w=10,d=1<<w,C=8,E=1<<C,A=w+C,o=1<<A,i=[],a=[],l=[],m=[],R=r.NeuQuant=function(r,d,h){var o,i;_=r,n=d,c=h,e=new Array(t);for(o=0;o<t;o++)e[o]=new Array(4),i=e[o],i[0]=i[1]=i[2]=(o<<s+8)/t,l[o]=u/t,a[o]=0},P=function(){for(var n=[],i,a,o,r=new Array(t),s=0;s<t;s++)r[e[s][3]]=s;i=0;for(a=0;a<t;a++)o=r[a],n[i++]=e[o][0],n[i++]=e[o][1],n[i++]=e[o][2];return n},H=function(){var o,n,l,c,a,s,r=0,d=0;for(o=0;o<t;o++){a=e[o],l=o,c=a[1];for(n=o+1;n<t;n++)s=e[n],s[1]<c&&(l=n,c=s[1]);if(s=e[l],o!=l&&(n=s[0],s[0]=a[0],a[0]=n,n=s[1],s[1]=a[1],a[1]=n,n=s[2],s[2]=a[2],a[2]=n,n=s[3],s[3]=a[3],a[3]=n),c!=r){i[r]=d+o>>1;for(n=r+1;n<c;n++)i[n]=o;r=c,d=o}}i[r]=d+v>>1;for(n=r+1;n<256;n++)i[n]=v},I=function(){n<b&&(c=1),x=30+(c-1)/3,v=_,i=0,C=n,w=n/(3*c),g=w/B|0,r=d,l=M,e=l>>p,e<=1&&(e=0);for(t=0;t<e;t++)m[t]=r*((e*e-t*t)*E/(e*e));n<b?a=3:n%O!==0?a=3*O:n%y!==0?a=3*y:n%j!==0?a=3*j:a=3*k,t=0;for(var t,o,f,h,u,l,e,r,a,g,w,v,i,C;t<w;)if(f=(v[i+0]&255)<<s,h=(v[i+1]&255)<<s,u=(v[i+2]&255)<<s,o=$(f,h,u),N(r,o,f,h,u),e!==0&&L(e,o,f,h,u),i+=a,i>=C&&(i-=n),t++,g===0&&(g=1),t%g===0){r-=r/x,l-=l/S,e=l>>p,e<=1&&(e=0);for(o=0;o<e;o++)m[o]=r*((e*e-o*o)*E/(e*e))}},U=r.map=function(u,d,h){a=1e3,l=-1,r=i[d],c=r-1;for(var r,c,n,s,a,o,l;r<t||c>=0;)r<t&&(o=e[r],n=o[1]-d,n>=a?r=t:(r++,n<0&&(n=-n),s=o[0]-u,s<0&&(s=-s),n+=s,n<a&&(s=o[2]-h,s<0&&(s=-s),n+=s,n<a&&(a=n,l=o[3])))),c>=0&&(o=e[c],n=d-o[1],n>=a?c=-1:(c--,n<0&&(n=-n),s=o[0]-u,s<0&&(s=-s),n+=s,n<a&&(s=o[2]-h,s<0&&(s=-s),n+=s,n<a&&(a=n,l=o[3]))));return l},W=r.process=function(){return I(),V(),H(),P()},V=function(){var n,i;for(n=0;n<t;n++)e[n][0]>>=s,e[n][1]>>=s,e[n][2]>>=s,e[n][3]=n},L=function(f,r,h,u,d){a=r-f,a<-1&&(a=-1),i=r+f,i>t&&(i=t),l=r+1,c=r-1,p=1;for(var l,c,a,i,s,p,n;l<i||c>a;){if(s=m[p++],l<i){n=e[l++];try{n[0]-=s*(n[0]-h)/o,n[1]-=s*(n[1]-u)/o,n[2]-=s*(n[2]-d)/o}catch(e){}}if(c>a){n=e[c--];try{n[0]-=s*(n[0]-h)/o,n[1]-=s*(n[1]-u)/o,n[2]-=s*(n[2]-d)/o}catch(e){}}}},N=function(n,s,o,i,a){var t=e[s];t[0]-=n*(t[0]-o)/d,t[1]-=n*(t[1]-i)/d,t[2]-=n*(t[2]-a)/d},$=function(y,j,b){var o,i,n,u,p,d,c=~(1<<31),v=c,r=-1,m=r;for(o=0;o<t;o++)d=e[o],i=d[0]-y,i<0&&(i=-i),n=d[1]-j,n<0&&(n=-n),i+=n,n=d[2]-b,n<0&&(n=-n),i+=n,i<c&&(c=i,r=o),u=i-(a[o]>>g-s),u<v&&(v=u,m=o),p=l[o]>>f,l[o]-=p,a[o]+=p<<h;return l[r]+=D,a[r]-=z,m};return R.apply(this,arguments),r}