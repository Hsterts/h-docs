solutionFiles=[];function selectSetup(n,e){let c=document.getElementById("solution-finder-selection-main"),s=[...document.getElementsByClassName("selection-fumen")],i=document.getElementById(n+"-selection-fumen"),t=document.getElementsByClassName("solution-finder-display-image")[0],a=rotationMode=="with180"?"-180":"-90";for(let e=0;e<s.length;e++)s[e].className="selection-fumen";i.className="selection-fumen selected",selectedFileName=n+a,mirrored&&(selectedFileName+="-mirror",e=mirrorFumen(e)[0]);let r=5,o=10,l=22,d=allGridToggle,u=null,h=!0,m=null,f=500,p=!1,g=null;t.setAttribute("data-code",e),t.src=draw(decoder.decode(e)[0],{numrows:r,numcols:o,cellSize:l,gridToggle:d,gridColor:u,transparency_four:h,background:m,delay:f,lock:p,outline:g}).toDataURL("image/png"),getSolutions(),c.style.display="none"}function getSolutions(){let e=document.getElementById("solution-finder-outputs"),t=document.getElementsByClassName("solution-finder-input")[0];t.value=t.value.toUpperCase().replace(/[^TILJSZO]/,'');let n=t.value;console.log(selectedFileName);let s=Object.keys(solutionFiles).indexOf(selectedFileName);if(n.length==7){let t=Object.values(solutionFiles)[s],o=[];for(let e=0;e<t.length;e++)o.push(t[e][0]);let i=o.indexOf(n);if(i==-1){console.log("Queue not found"),e.innerHTML='';let n=document.getElementsByClassName("solution-finder-input-title")[0],s=o.indexOf("queuecomp"),i=t[s][1];n.innerHTML='Input <span style="opacity: 0.5; font-weight: 400;">('+i+")</span>",setTimeout(function(){n.innerHTML="Input"},5e3)}else{let a=o.indexOf("cover"),r=o.indexOf("type"),s=[];for(let e=1;e<t[0].length;e++)t[i][e]=="O"&&s.push({fumen:t[0][e],cover:t[a][e],type:t[r][e]});e.innerHTML='';for(let t=0;t<s.length;t++){let r=s[t].fumen,u="<strong>Cover</strong>: "+s[t].cover,o=s[t].type;o=o.replace("M","Minimal").replace("X#",'');let i=document.createElement("figure");i.className="fumen-figure";let c=document.createElement("figcaption"),a=document.createElement("div");a.setAttribute("class","stat"),a.innerHTML=u,o&&(a.innerHTML+="<br>"+o),c.appendChild(a);let n=document.createElement("img"),d=5,l=10,h=15,m=!1,f=null,p=!0,g=null,v=500,b=!1,j=null;n.src=draw(decoder.decode(unglueFumen(r))[0],{numrows:d,numcols:l,cellSize:h,gridToggle:m,gridColor:f,transparency_four:p,background:g,delay:v,lock:b,outline:j}).toDataURL("image/png"),n.setAttribute("data-code",r),n.setAttribute("class","fumen-image"),i.appendChild(n),i.appendChild(c),e.appendChild(i)}console.log(s.length+" solutions found for "+n)}}}async function loadSolutionFiles(){let t=document.getElementsByClassName("solution-finder-input")[0];t.value="Loading...",t.disabled=!0,t.setAttribute("style","opacity: 0.5; text-transform: capitalize; font-family: var(--font-body); font-style: italic;");let n=[],s=Array.from(document.getElementsByClassName("setup-image"),e=>e.children[0].getAttribute("id")),e=[];for(let t=0;t<s.length;t++){let n=s[t],o=n+"-90",i=n+"-180";e.push(o),e.push(i),e.push(o+"-mirror"),e.push(i+"-mirror")}for(let t=0;t<e.length;t++){let s=e[t],o=window.location.origin+"/h-docs/attachments_solutions/"+s+".csv";await fetch(o).then(e=>e.text()).then(e=>{n=$.csv.toArrays(e),solutionFiles[s]=n})}t.value='',t.disabled=!1,t.setAttribute("style",''),console.log(e.length+" solution files loaded.")}function generatePCSF(){let e=document.getElementById("solution-finder-base");if(e){let d=document.createElement("section");d.setAttribute("id","solution-finder");let b=document.createElement("div");b.setAttribute("class","solution-finder-body");let t=document.createElement("div");t.setAttribute("class","pc-solution-finder");let g=document.createElement("h2");g.setAttribute("class","solution-finder-title"),g.innerText="Solution Finder";let a=document.createElement("div");a.setAttribute("class","solution-finder-query");let n=document.createElement("div");n.setAttribute("id","solution-finder-display");let p=document.createElement("h3");p.setAttribute("class","solution-finder-display-title"),p.innerText="Selected Setup";let c=document.createElement("img");c.setAttribute("class","solution-finder-display-image"),c.setAttribute("onclick",'document.getElementById("solution-finder-selection-main").style.display = ""');let m=document.createElement("div");m.setAttribute("id","solution-finder-selection-main");let s=document.createElement("div");s.setAttribute("id","solution-finder-selection-body");let u=document.createElement("h2");u.setAttribute("class","solution-finder-selection-title"),u.innerText="Setup Selection";let h=document.createElement("div");h.setAttribute("id","solution-finder-selection");let l=document.createElement("div");l.setAttribute("class","solution-finder-input-body");let f=document.createElement("h3");f.innerText="Input",f.setAttribute("class","solution-finder-input-title");let r=document.createElement("div");r.setAttribute("style","display: flex; flex-direction: row;"),r.setAttribute("class","solution-finder-inputs-container");let i=document.createElement("div");i.setAttribute("class","input-item");let v=document.createElement("span");v.setAttribute("class","item-title"),v.innerText="Queue";let o=document.createElement("textarea");o.setAttribute("class","solution-finder-input"),o.setAttribute("maxlength","7"),o.addEventListener("input",getSolutions);let y=document.createElement("hr");y.setAttribute("class","small divider");let _=document.createElement("div");_.setAttribute("id","solution-finder-outputs"),e.appendChild(d),d.appendChild(b),b.appendChild(t),t.appendChild(g),t.appendChild(a),a.appendChild(n),n.appendChild(p),n.appendChild(c),n.appendChild(m),m.appendChild(s),s.appendChild(u),s.appendChild(h),a.appendChild(l),l.appendChild(f),l.appendChild(r),r.appendChild(i),i.appendChild(v),i.appendChild(o),t.appendChild(y),t.appendChild(_);let j=document.getElementsByClassName("setup-image");for(let t=0;t<j.length;t++){let s=j[t].children[0].getAttribute("id"),n=j[t].children[0].innerText,e=document.createElement("fumen");if(e.innerText=n,e.setAttribute("id",s+"-selection-fumen"),e.setAttribute("clipboard",!1),e.setAttribute("onclick",'selectSetup("'+s+'", "'+n+'")'),e.className="selection-fumen",h.appendChild(e),t==0){let e=5,t=10,o=22,i=!1,a=null,r=!0,l=null,d=500,u=!1,h=null;c.src=draw(decoder.decode(n)[0],{numrows:e,numcols:t,cellSize:o,gridToggle:i,gridColor:a,transparency_four:r,background:l,delay:d,lock:u,outline:h}).toDataURL("image/png"),selectSetup(s,n)}}loadSolutionFiles()}}generatePCSF()